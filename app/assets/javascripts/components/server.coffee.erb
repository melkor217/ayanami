@ServerList = React.createClass
  componentDidMount: ->
    if @props.url
      @serverRequest = $.get @props.url, (data) =>
        @setState servers: data
  getInitialState: ->
    servers: []
  render: ->
    {tbody, thead, table, tr, td, th} = React.DOM
    table
      className: "table fixed table-bordered"
      children: [
        thead
          children: [
            tr
              children: [
                th null, ''
                th null, 'Name'
                th null, 'IP Address'
                th null, 'Players'
                th null, 'Kills'
                th null, 'Headshots'
                th null, 'Current map'
              ]
          ]
        tbody
          children: [
            @state.servers.map (data) -> React.createElement(Server, data)
          ]
      ]


@Server = React.createClass
  getDefaultProps: ->
    name: ''
  render: ->
    {tr, td, a} = React.DOM
    tr
      children: [
        td null, a
          className: "btn btn-info"
          href: "steam://connect/#{@props.publicaddress}"
          'Connect'
        td null, @props.name
        td {style: {'font-family': 'monospace'}}, @props.publicaddress
        td null, "#{@props.livestats_players} (#{@props.act_players}) / #{@props.max_players}"
        td null, @props.kills
        td null, @props.headshots
        td null, @props.act_map
      ]
